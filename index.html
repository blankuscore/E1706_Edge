<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>DTX Status</title>
        <link rel = "stylesheet" href="style.css">
        <script src=
            "https://code.jquery.com/jquery-3.5.1.js">
        </script>
        <style>
            .myDiv{
                background-color: gray;
                text-align: center;
                font-size: 1.5em;
                color: white;
            }
        </style>
        <style>
            .mega-menu_container{
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
            display: flex;
            justify-content: normal;
            padding: 0 2.25em;
            padding-left: calc(2.25em + -50vw + 720px);
            padding-right: calc(2.25em + -50vw + 720px);
            flex-wrap: nowrap;
            }
        </style>

        <div id="block-sitelogo" data-block-plugin-id="block_content:e3f15a1c-e408-49eb-acab-947dcb5c539c" class="nvent-block">
            <div class="block">
                
                    
                
            
            <figure class="mega-menu__logo mega-menu__logo--nvent">
                <a class="logo__link" href="/en-us/home" aria-label="Homepage Link">
                        <span class="sr-only"></span>
                            
            
            <picture class="logo__image">
                
            <img class="logo__img" src="https://www.nvent.com/themes/custom/particle/dist/app-drupal/assets/images/logo-nvent.svg" alt="Homepage" loading="lazy">
            
            </picture>
                
                </a>
            
            </figure>
            </div>
            </div>
    </head>
    <body>
        <div class = "skill">
            <div class="outer">
                <div class="inner">
                    <div id="number">  </div>
                </div>
            </div>
        <svg xmlns = "https://www.w3.org/2000/svg" version = "1.1" width = "160px" height = "160px">
            <defs>
                <linearGradient id = "GradientColor">
                    <stop offset="0%" stop-color="#e91e63"/>
                    <stop offset="100%" stop-color="#673ab7"/>
                </linearGradient>
            </defs>
            <circle cx = "80" cy = "80" r = "70" stroke-linecap = "round"/>
        </svg>
        </div>

        <div class = "myDiv", id = "myData"></div>
        <script>
            fetch('https://raw.githubusercontent.com/blankuscore/E1706_Edge/main/data.json')
            .then(function(response){
                return response.json();
            })
            .then(function (data){
                appendData(data);
                createprogressbar(data);
            })
            .catch(function(err){
                console.log('error:' + err);
            })
            function appendData(data) {
                var mainContainer = document.getElementById("myData");
                for (var i = 0; i < data.length; i++) {
                    var div = document.createElement("div");
                    div.innerHTML = "Surge Count: " + data[i].surge;
                    mainContainer.appendChild(div);
                    var div = document.createElement("div");
                    div.innerHTML = "TOV Count: " + data[i].tov;
                    mainContainer.appendChild(div)
                    if(data[i].module_status_1 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 1: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_2 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 2: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_3 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 3: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_4 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 4: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_5 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 5: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_6 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 6: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_7 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 7: OK";
                        mainContainer.appendChild(div)
                    }
                }
            }
            function createprogressbar(data){
                let number = document.getElementById("number");
                let counter = 0;
                setInterval(() => {
                    if(counter == parseInt(data[0].surge)){
                        clearInterval();
                    }else{
                        counter +=1;
                        number.innerHTML = counter;
                }}, 1);
            }  
        </script>
    </body>
</html>