<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>DTX Status</title>
        <link rel = "stylesheet" href="style.css">
        <script src=
            "https://code.jquery.com/jquery-3.5.1.js">
        </script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.8.1"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
    </head>
    <body class = "body">
        <div class = "w-row">
            <div class = "w-col w-col-2"><img src="https://uploads-ssl.webflow.com/62b5c7ad8165e99e02f49528/62b5c821e2e04e3f6384c5f8_logo-nvent.svg" loading="lazy" width="123" alt=""></div>
            <div class = "w-col w-col-3"><h2 class = "heading">DTX&nbsp;Status</h2></div>        
            <div class = "w-col w-col-5"><h2 class = "heading">DTX120F208Y</h2></div>
        </div>
        <div class="div-block"></div>
    </body>
    <body>
        <div class = "w-row">
            <div class = "w-col"><h3>Surge Count:</h3></div>
            <div class = "w-col">
                <div class = "skill">
                    <div class="outer">
                        <div class="inner">
                            <div id="number">  </div>
                        </div>
                    </div>
                    <svg xmlns = "https://www.w3.org/2000/svg" version = "1.1" width = "160px" height = "160px">
                        <defs>
                            <linearGradient id = "GradientColor">
                                <stop offset="0%" stop-color="#e91e63"/>
                                <stop offset="100%" stop-color="#673ab7"/>
                            </linearGradient>
                        </defs>
                        <circle cx = "80" cy = "80" r = "70" stroke-linecap = "round"/>
                    </svg>
                </div>
            </div>
            <div class = "w-col"><h3>TOV Count:</h3></div>
            <div class = "w-col">
                <div class = "skill">
                    <div class="outer">
                        <div class="inner">
                            <div id="number2">  </div>
                        </div>
                    </div>
                    <svg xmlns = "https://www.w3.org/2000/svg" version = "1.1" width = "160px" height = "160px">
                        <defs>
                            <linearGradient id = "GradientColor">
                                <stop offset="0%" stop-color="#e91e63"/>
                                <stop offset="100%" stop-color="#673ab7"/>
                            </linearGradient>
                        </defs>
                        <circle cx = "80" cy = "80" r = "70" stroke-linecap = "round"/>
                    </svg>
                </div>
            </div>
        </div>
        <div class = "myDiv", id = "myData"></div>
        <script>
            fetch('https://raw.githubusercontent.com/blankuscore/E1706_Edge/main/data.json')
            .then(function(response){
                return response.json();
            })
            .then(function (data){
                // appendData(data);
                createprogressbar(data);
                createprogressbar2(data);
            })
            .catch(function(err){
                console.log('error:' + err);
            })
            function appendData(data) {
                var mainContainer = document.getElementById("myData");
                for (var i = 0; i < data.length; i++) {
                    var div = document.createElement("div");
                    div.innerHTML = "Surge Count: " + data[i].surge;
                    mainContainer.appendChild(div);
                    var div = document.createElement("div");
                    div.innerHTML = "TOV Count: " + data[i].tov;
                    mainContainer.appendChild(div)
                    if(data[i].module_status_1 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 1: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_2 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 2: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_3 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 3: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_4 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 4: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_5 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 5: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_6 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 6: OK";
                        mainContainer.appendChild(div)
                    }
                    if(data[i].module_status_7 == 1){
                        var div = document.createElement("div");
                        div.innerHTML = "Module Status 7: OK";
                        mainContainer.appendChild(div)
                    }
                }
            }
            function createprogressbar(data){
                let number = document.getElementById("number");
                let counter = 0;
                setInterval(() => {
                    if(counter == parseInt(data[0].surge)){
                        clearInterval();
                    }else{
                        counter +=1;
                        number.innerHTML = counter;
                }}, 18);
            }
            function createprogressbar2(data){
                let number = document.getElementById("number2");
                let counter = 0;
                setInterval(() => {
                    if(counter == parseInt(data[0].tov)){
                        clearInterval();
                    }else{
                        counter +=1;
                        number2.innerHTML = counter;
                }}, 18);
            }
        </script>
        <table style="width: 600px">
            <tr>
                <td></td>
                <td rowspan = "9"><img src="C:\Users\e1176752\Pictures\DTX\DTXCARRIER1.PNG" width = 300px></td>
            </tr>
            <tr>
                <td></td>
            </tr>
            <tr>
                <td>Module 1 Status: Replace DT2150M</td>
            </tr>
            <tr>
                <td>Module 2 Status: OK</td>
            </tr>
            <tr>
                <td>Module 3 Status: OK</td>
            </tr>
            <tr>
                <td>Module 4 Status: OK</td>
            </tr>
            <tr>
                <td>Module 5 Status: OK</td>
            </tr>
            <tr>
                <td>Module 6 Status: OK</td>
            </tr>
            <tr>
                <td>Module 7 Status: OK</td>
            </tr>
        </table>    
    </body>
</html>